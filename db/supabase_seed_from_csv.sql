-- Supabase seed from data2024h1and2025.csv
-- Run this after db/supabase_schema.sql in the Supabase SQL editor.
-- Missing/blank CSV cells are treated as 0. Edit values if you need corrections.

-- Periods
insert into public.periods (label, year, half)
values
  ('2024-H2', 2024, 'H2'),
  ('2025-H1', 2025, 'H1'),
  ('2025-H2', 2025, 'H2')
on conflict (label) do nothing;

-- Projects (codes are synthetic; names are from the CSV, adjust as needed)
with proj as (
  insert into public.projects (code, name, type, software, status, unit_price)
  values
    ('PRJ-001','ISJ (A)','Mechanical Design','CATIA','active',2300),
    ('PRJ-002','ISJ (B)','Mechanical Design','CATIA','active',2300),
    ('PRJ-003','ISJ (C)','Mechanical Design','ICAD','active',2300),
    ('PRJ-004','GLW (LM)','Mechanical Design','CATIA','active',2300),
    ('PRJ-005','GLW (FALTEC)','Mechanical Design','CATIA','active',2300),
    ('PRJ-006','GLW (?)','Mechanical Design','CATIA','active',2300),
    ('PRJ-007','NX/CATIA mixed','Mechanical Design','CATIA','active',2300),
    ('PRJ-008','GNN(5P45)','Mechanical Design','CATIA','active',2300),
    ('PRJ-009','GNN(H60E)','Mechanical Design','CATIA','active',2300),
    ('PRJ-010','GNN(L53M)','Mechanical Design','CATIA','active',2300),
    ('PRJ-011','GNN(33FY)','Mechanical Design','CATIA','active',2300),
    ('PRJ-012','Project 12 (CATIA)','Mechanical Design','CATIA','active',2300),
    ('PRJ-013','VUTEQ','Mechanical Design','CATIA','active',2300),
    ('PRJ-014','GNN(W13G) A','Mechanical Design','CATIA','active',2300),
    ('PRJ-015','GNN(W13G) B','Mechanical Design','CATIA','active',2300),
    ('PRJ-016','ICAD Project','Mechanical Design','ICAD','active',2300)
  on conflict (code) do update
    set name = excluded.name,
        type = excluded.type,
        software = excluded.software,
        unit_price = excluded.unit_price,
        status = 'active'
  returning id, code
)

-- Monthly records
insert into public.monthly_records (project_id, period_label, year, month, planned_hours, actual_hours)
select p.id, v.period_label, v.year, v.month, v.planned_hours, v.actual_hours
from (
  values
  -- PRJ-001 ISJ (A)
  ('PRJ-001','2024-H2',2024,8,0,0),('PRJ-001','2024-H2',2024,9,50,0),('PRJ-001','2024-H2',2024,10,50,0),('PRJ-001','2024-H2',2024,11,100,0),('PRJ-001','2024-H2',2024,12,100,0),
  ('PRJ-001','2025-H1',2025,1,130,80),('PRJ-001','2025-H1',2025,2,160,152),('PRJ-001','2025-H1',2025,3,160,160),('PRJ-001','2025-H1',2025,4,160,152),('PRJ-001','2025-H1',2025,5,105,161),('PRJ-001','2025-H1',2025,6,160,171),
  ('PRJ-001','2025-H2',2025,7,160,160),('PRJ-001','2025-H2',2025,8,120,154),('PRJ-001','2025-H2',2025,9,160,160),('PRJ-001','2025-H2',2025,10,160,182),('PRJ-001','2025-H2',2025,11,160,80),('PRJ-001','2025-H2',2025,12,135,0),

  -- PRJ-002 ISJ (B)
  ('PRJ-002','2024-H2',2024,8,0,0),('PRJ-002','2024-H2',2024,9,50,0),('PRJ-002','2024-H2',2024,10,50,0),('PRJ-002','2024-H2',2024,11,100,0),('PRJ-002','2024-H2',2024,12,100,0),
  ('PRJ-002','2025-H1',2025,1,120,32),('PRJ-002','2025-H1',2025,2,150,56),('PRJ-002','2025-H1',2025,3,150,0),('PRJ-002','2025-H1',2025,4,150,0),('PRJ-002','2025-H1',2025,5,100,0),('PRJ-002','2025-H1',2025,6,150,0),
  ('PRJ-002','2025-H2',2025,7,200,0),('PRJ-002','2025-H2',2025,8,180,0),('PRJ-002','2025-H2',2025,9,200,0),('PRJ-002','2025-H2',2025,10,200,0),('PRJ-002','2025-H2',2025,11,200,0),('PRJ-002','2025-H2',2025,12,180,0),

  -- PRJ-003 ISJ (C)
  ('PRJ-003','2024-H2',2024,8,0,0),('PRJ-003','2024-H2',2024,9,50,0),('PRJ-003','2024-H2',2024,10,50,0),('PRJ-003','2024-H2',2024,11,100,0),('PRJ-003','2024-H2',2024,12,100,0),
  ('PRJ-003','2025-H1',2025,1,100,8),('PRJ-003','2025-H1',2025,2,100,0),('PRJ-003','2025-H1',2025,3,100,8),('PRJ-003','2025-H1',2025,4,100,0),('PRJ-003','2025-H1',2025,5,80,0),('PRJ-003','2025-H1',2025,6,100,0),

  -- PRJ-004 GLW (LM)
  ('PRJ-004','2024-H2',2024,8,0,3),('PRJ-004','2024-H2',2024,9,150,74),('PRJ-004','2024-H2',2024,10,150,109),('PRJ-004','2024-H2',2024,11,0,150),('PRJ-004','2024-H2',2024,12,0,446),
  ('PRJ-004','2025-H1',2025,1,0,0),('PRJ-004','2025-H1',2025,2,50,0),('PRJ-004','2025-H1',2025,3,50,0),('PRJ-004','2025-H1',2025,4,50,0),('PRJ-004','2025-H1',2025,5,50,0),('PRJ-004','2025-H1',2025,6,50,0),
  ('PRJ-004','2025-H2',2025,7,50,0),('PRJ-004','2025-H2',2025,8,30,0),('PRJ-004','2025-H2',2025,9,50,0),('PRJ-004','2025-H2',2025,10,50,0),('PRJ-004','2025-H2',2025,11,50,0),('PRJ-004','2025-H2',2025,12,30,0),

  -- PRJ-005 GLW (FALTEC)
  ('PRJ-005','2025-H1',2025,1,100,0),('PRJ-005','2025-H1',2025,2,100,0),('PRJ-005','2025-H1',2025,3,140,0),('PRJ-005','2025-H1',2025,4,140,0),('PRJ-005','2025-H1',2025,5,120,0),('PRJ-005','2025-H1',2025,6,140,0),
  ('PRJ-005','2025-H2',2025,7,140,0),('PRJ-005','2025-H2',2025,8,120,0),('PRJ-005','2025-H2',2025,9,140,0),('PRJ-005','2025-H2',2025,10,140,0),('PRJ-005','2025-H2',2025,11,140,0),('PRJ-005','2025-H2',2025,12,120,0),

  -- PRJ-006 GLW (?)
  ('PRJ-006','2025-H1',2025,1,100,0),('PRJ-006','2025-H1',2025,2,100,0),('PRJ-006','2025-H1',2025,3,100,0),('PRJ-006','2025-H1',2025,4,100,0),('PRJ-006','2025-H1',2025,5,80,0),('PRJ-006','2025-H1',2025,6,100,0),
  ('PRJ-006','2025-H2',2025,7,100,0),('PRJ-006','2025-H2',2025,8,80,0),('PRJ-006','2025-H2',2025,9,100,0),('PRJ-006','2025-H2',2025,10,100,0),('PRJ-006','2025-H2',2025,11,100,0),('PRJ-006','2025-H2',2025,12,80,0),

  -- PRJ-007 NX/CATIA mixed
  ('PRJ-007','2025-H1',2025,1,0,0),('PRJ-007','2025-H1',2025,2,0,0),('PRJ-007','2025-H1',2025,3,0,0),('PRJ-007','2025-H1',2025,4,100,0),('PRJ-007','2025-H1',2025,5,80,3),('PRJ-007','2025-H1',2025,6,100,0),
  ('PRJ-007','2025-H2',2025,7,100,0),('PRJ-007','2025-H2',2025,8,80,0),('PRJ-007','2025-H2',2025,9,100,0),('PRJ-007','2025-H2',2025,10,100,0),('PRJ-007','2025-H2',2025,11,100,0),('PRJ-007','2025-H2',2025,12,80,0),

  -- PRJ-008 GNN(5P45)
  ('PRJ-008','2025-H1',2025,1,100,74),('PRJ-008','2025-H1',2025,2,100,72),('PRJ-008','2025-H1',2025,3,100,208),('PRJ-008','2025-H1',2025,4,100,10),('PRJ-008','2025-H1',2025,5,80,0),('PRJ-008','2025-H1',2025,6,100,0),
  ('PRJ-008','2025-H2',2025,7,100,0),('PRJ-008','2025-H2',2025,8,80,0),('PRJ-008','2025-H2',2025,9,100,8),('PRJ-008','2025-H2',2025,10,100,15),('PRJ-008','2025-H2',2025,11,100,0),('PRJ-008','2025-H2',2025,12,80,0),

  -- PRJ-009 GNN(H60E)
  ('PRJ-009','2025-H1',2025,1,0,0),('PRJ-009','2025-H1',2025,2,0,0),('PRJ-009','2025-H1',2025,3,0,85),('PRJ-009','2025-H1',2025,4,0,0),('PRJ-009','2025-H1',2025,5,0,0),('PRJ-009','2025-H1',2025,6,0,0),

  -- PRJ-010 GNN(L53M)
  ('PRJ-010','2025-H1',2025,1,0,0),('PRJ-010','2025-H1',2025,2,0,0),('PRJ-010','2025-H1',2025,3,0,0),('PRJ-010','2025-H1',2025,4,0,0),('PRJ-010','2025-H1',2025,5,0,110),('PRJ-010','2025-H1',2025,6,0,0),
  ('PRJ-010','2025-H2',2025,7,0,0),('PRJ-010','2025-H2',2025,8,0,78),('PRJ-010','2025-H2',2025,9,0,0),('PRJ-010','2025-H2',2025,10,0,0),('PRJ-010','2025-H2',2025,11,0,0),('PRJ-010','2025-H2',2025,12,0,0),

  -- PRJ-011 GNN(33FY)
  ('PRJ-011','2025-H2',2025,7,0,0),('PRJ-011','2025-H2',2025,8,0,0),('PRJ-011','2025-H2',2025,9,0,0),('PRJ-011','2025-H2',2025,10,0,0),('PRJ-011','2025-H2',2025,11,0,43),('PRJ-011','2025-H2',2025,12,0,0),

  -- PRJ-012 Project 12
  ('PRJ-012','2025-H1',2025,1,0,0),('PRJ-012','2025-H1',2025,2,0,0),('PRJ-012','2025-H1',2025,3,150,0),('PRJ-012','2025-H1',2025,4,250,0),('PRJ-012','2025-H1',2025,5,150,0),('PRJ-012','2025-H1',2025,6,0,0),
  ('PRJ-012','2025-H2',2025,7,0,0),('PRJ-012','2025-H2',2025,8,0,0),('PRJ-012','2025-H2',2025,9,150,0),('PRJ-012','2025-H2',2025,10,250,0),('PRJ-012','2025-H2',2025,11,150,0),('PRJ-012','2025-H2',2025,12,0,0),

  -- PRJ-013 VUTEQ
  ('PRJ-013','2025-H2',2025,7,50,0),('PRJ-013','2025-H2',2025,8,30,0),('PRJ-013','2025-H2',2025,9,50,0),('PRJ-013','2025-H2',2025,10,50,0),('PRJ-013','2025-H2',2025,11,50,0),('PRJ-013','2025-H2',2025,12,30,0),

  -- PRJ-014 GNN(W13G) A
  ('PRJ-014','2025-H2',2025,7,0,0),('PRJ-014','2025-H2',2025,8,0,0),('PRJ-014','2025-H2',2025,9,30,79),('PRJ-014','2025-H2',2025,10,40,140),('PRJ-014','2025-H2',2025,11,40,0),('PRJ-014','2025-H2',2025,12,20,0),

  -- PRJ-015 GNN(W13G) B
  ('PRJ-015','2025-H2',2025,7,0,0),('PRJ-015','2025-H2',2025,8,0,0),('PRJ-015','2025-H2',2025,9,0,0),('PRJ-015','2025-H2',2025,10,0,0),('PRJ-015','2025-H2',2025,11,0,40),('PRJ-015','2025-H2',2025,12,0,0),

  -- PRJ-016 ICAD Project
  ('PRJ-016','2025-H2',2025,7,100,0),('PRJ-016','2025-H2',2025,8,80,0),('PRJ-016','2025-H2',2025,9,100,0),('PRJ-016','2025-H2',2025,10,100,0),('PRJ-016','2025-H2',2025,11,100,0),('PRJ-016','2025-H2',2025,12,80,0)
) as v(project_code, period_label, year, month, planned_hours, actual_hours)
join proj p on p.code = v.project_code
on conflict (project_id, period_label, year, month)
  do update set planned_hours = excluded.planned_hours,
                actual_hours = excluded.actual_hours,
                updated_at = now();

select 'seed complete';
